<span ng-controller="courses-controller" ng-init="check_auth()">
  <div class="Course_Spec row" ng-controller="course-controller" ng-init="retrieve_course()">
    <!-- Carousel for Course Info -->
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#myCarousel" class="active" ng-click="change_active(1)"></li>
        <li data-target="#myCarousel" class="" ng-click="change_active(2)"></li>
      </ol>
      <div class="carousel-inner" role="listbox">
        <div class="item active">
          <img class="second-slide slider-pic" src="./../assets/default.jpg" alt="Second slide">
          <div class="container">
            <div class="carousel-caption">
              <span class="Course_Header">{{course_intro.course_title}} </span><span class="Course_Header-sub">{{course_intro.course_section}}</span><br/><br/>
              <p class="Course_Instructor"><i class="glyphicon glyphicon-user course_glyph"></i> &nbsp;{{course_intro.firstname + " " + course_intro.lastname}}</p><br/><br/>
            </div>
          </div>
        </div>
        <div class="item">
          <img class="third-slide slider-pic" src="./../assets/default.jpg" alt="Third slide">
          <div class="container">
            <div class="carousel-caption">
              <span class="Course_Header">About the course </span><br/><br/>
              <p class="Course_Description">{{course_intro.course_description}}</p><br/><br/>
            </div>
          </div>
        </div>
      </div>
      <a class="left carousel-control" href="javascript:void(0)" role="button" data-slide="prev" ng-if="active === 2" ng-click="change_active(1)">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="javascript:void(0)" role="button" data-slide="next" ng-if="active === 1" ng-click="change_active(2)">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    <!--  -->
    <div class="Course_Spec_Dash row">
      <div class="hidden-xs hidden-sm col-md-3 col-lg-3">
        <div class="col-xs-1 col-md-2 col-lg-3"/>
        <div class="col-xs-10 col-sm-12 col-md-10 col-lg-9">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">Pending</h4>
            </div>
            <div class="panel-body">
              Panel content
            </div>
          </div>
        </div>
        <div class="col-xs-1"/>
      </div>
      <div ng-controller="courses-controller" class="col-xs-12 col-sm-12 col-md-9 col-lg-9" ng-init="check_auth(); retrieve_announcement()">
        <div class="col-xs-1 col-sm-1 hidden-md hidden-lg"/>
        <div class="col-xs-10 col-sm-10 col-md-11 col-lg-11">
          <div class="Head panel panel-default">
            <div class="row panel-body">
              <div class="col-lg-12">
                <div class="form-group has-success has-feedback">
                  <label class="control-label" for="inputGroupSuccess1" ng-if="active_option === 1">Enter Note</label>
                  <label class="control-label" for="inputGroupSuccess1" ng-if="active_option === 2 && session.role === 'Instructor'">Enter Assignment Note</label>
                  <label class="control-label" for="inputGroupSuccess1" ng-if="active_option === 3 && session.role === 'Instructor'">Enter Quiz Note</label>
                  <label class="control-label" for="inputGroupSuccess1" ng-if="active_option === 4 && session.role === 'Instructor'">Enter Attachment Note</label>
                  <div class="input-group">
                    <span class="input-group-addon"></span>
                    <textarea ng-model="note_info.post" type="text" class="form-control" rows="3" id="inputGroupSuccess1 note" aria-describedby="inputGroupSuccess1Status" placeholder="Enter your note here" />
                  </div>
                  <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                  <span id="inputGroupSuccess1Status" class="sr-only">(success)</span>
                </div>
              </div>
              <div class="col-lg-12">
                <div class="Course_Option col-xs-12 col-md-10 col-lg-10" ng-if="active_option === 1 || active_option === 3">
                  <span ng-if="active_option === 1 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post-active"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                  <span ng-if="active_option === 2 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post-active"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                  <span ng-if="active_option === 3 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post-active"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                  <span ng-if="active_option === 4 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post-active"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                </div>
                <div class="Course_Option col-xs-12 col-md-9 col-lg-9" ng-if="active_option === 2 || active_option === 4">
                  <span ng-if="active_option === 1 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post-active"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                  <span ng-if="active_option === 2 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post-active"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                  <span ng-if="active_option === 3 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post-active"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                  <span ng-if="active_option === 4 && session.role === 'Instructor'">
                    <a ng-click="change_option(1)" class="Course_Post"><i class="glyphicon glyphicon-modal-window glyph_spec"></i><span class="glyph_spec hidden-xs">Note</span></a>
                    <a ng-click="change_option(2)" class="Course_Post"><i class="glyphicon glyphicon-list-alt glyph_spec"></i><span class="glyph_spec hidden-xs">Assignment</span></a>
                    <a ng-click="change_option(3)" class="Course_Post"><i class="glyphicon glyphicon-equalizer glyph_spec"></i><span class="glyph_spec hidden-xs">Quiz</span></a>
                    <a ng-click="change_option(4)" class="Course_Post-active"><i class="glyphicon glyphicon-file glyph_spec"></i><span class="glyph_spec hidden-xs">Attachment</span></a>
                  </span>
                </div>
                <div class="col-xs-12 col-md-2 col-lg-2 centralized" ng-if="active_option === 1 || active_option === 3">
                  <button type="submit" class="btn btn-primary" ng-if="active_option === 1" ng-click="create_note(session)">Create Note</button>
                  <button type="submit" class="btn btn-primary" ng-if="active_option === 3 && note_info.post.length !== 0" data-toggle="modal" data-target=".bd-example-modal-lgs">Create Quiz</button>
                  <button type="submit" class="btn btn-primary" ng-if="active_option === 3 && note_info.post.length === 0" ng-click="emptyPrompt()">Create Quiz</button>
                </div>
                <div class="col-xs-12 col-md-3 col-lg-3 centralized" ng-if="active_option === 2 || active_option === 4">
                  <button type="submit" class="btn btn-primary" ng-if="active_option === 2">Create Assignment</button>
                  <button type="submit" class="btn btn-primary" ng-if="active_option === 4" ng-click="continue_upload(session)">
                    <span ng-if="active_loading === 0">Create Attachment</span>
                    <span class="Course_Preloader" ng-if="active_loading === 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="glyphicon glyphicon-repeat"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  </button>
                </div>
              </div>
            </div>
            <div class="Browse row panel-body" ng-if="active_option === 4">
              <div class="col-lg-12">
                <div class="col-xs-12 col-md-12 col-lg-12">
                  <label class="Filename custom-file">
                    <input type="file" id="fileupload" name="file" class="custom-file-input" accept="application/pdf" onchange="angular.element(this).scope().upload_attachment()">
                    <span class="custom-file-control"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xs-1 col-sm-1 hidden-md hidden-lg"/>
        
        <!-- Posts and Announcements -->
        <span ng-if="announcements.length != 0">
          <span ng-repeat="announcement in announcements">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="col-xs-1 col-sm-1 hidden-md hidden-lg"/>
            <div class="Course_Posted col-xs-10 col-sm-10 col-md-11 col-lg-11">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <div class="Announcement_Detail"><i class="glyphicon glyphicon-user post_glyph"></i></div>
                  <div class="panel-title">
                    {{announcement.firstname}} {{announcement.lastname}}
                    <p class="Announcement_Detail_Time">{{announcement.time_posted}}</p>
                  </div>
                </div>
                <div class="panel-body"><pre ng-bind-html="trust(announcement.post)"></pre></div>
                <div class="panel-body" ng-if="announcement.attachment_id !== null">
                  <div class="well">
                    <div class="Thumb_Panel row">
                      <div class="thumbnail hidden-xs hidden-sm hidden-md col-lg-2"/>
                      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-10">
                        <div class="row">
                          <div class="Quiz col-xs-9 col-sm-10 col-md-11 col-lg-11">
                            <a class="Announcement_Quiz" href="{{announcement.url}}" target="_blank">{{announcement.attachment_name}}</a>
                          </div>
                        </div>
                        <div class="row">
                          <div class="Head col-lg-12">
                            <p class="control-label">{{announcement.type}}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="panel-body" ng-if="announcement.questionnaire_id !== null">
                  <div class="well">
                    <div class="Thumb_Panel row">
                      <div class="thumbnail hidden-xs hidden-sm hidden-md col-lg-2"/>
                      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-10">
                        <div class="row">
                          <div class="Quiz col-xs-9 col-sm-10 col-md-11 col-lg-11">
                            <a class="Announcement_Quiz" ng-if="session.role === 'Instructor'" href="/#/question/{{announcement.questionnaire_id}}" target="_blank">{{announcement.questionnaire_name}}</a>
                            <a class="Announcement_Quiz" ng-if="session.role === 'Student'" href="/#/quiz/{{announcement.questionnaire_id}}" target="_blank">{{announcement.questionnaire_name}}</a>
                          </div>
                          <div class="Announcement_Quiz_Edit col-xs-3 col-sm-2 col-md-1 col-lg-1">
                            <button type="button" data-toggle="modal" data-target=".bd-example-modal-lgs-2" class="btn btn-success btn-rounded custom quiz_edit_glyph" ng-if="session.role === 'Instructor'" ng-click="questionnaires_get_info(announcement.questionnaire_id)">
                              <span class="float-right glyphicon glyphicon-pencil"></span>
                            </button>
                          </div>
                        </div>
                        <div class="row">
                          <div class="Head col-lg-12">
                            <p class="control-label">{{announcement.questionnaire_desc}}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xs-1 col-sm-1 hidden-md hidden-lg"/>
            </div>
          </span>
        </span>

        <span ng-if="announcements.length == 0">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="col-xs-1 col-sm-1 hidden-md hidden-lg"/>
          <div class="Course_Posted col-xs-10 col-sm-10 col-md-11 col-lg-11">
            <div class="panel panel-default">
              <div class="panel-body"><pre class="Announcement_Detail_Time">There are no announcements for this course yet!</pre></div>
            </div>
          </div>
          <div class="col-xs-1 col-sm-1 hidden-md hidden-lg"/>
          </div>
        </span>

        <!-- Add Modal -->
        <div class="modal fade bd-example-modal-lgs" id="addQuestionnaire" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Quiz</h4>
              </div>
              <div class="modal-body">
                <form>
                  <!-- Question name -->
                  <div class="form-group">
                    <label class="control-label" for="inputGroupSuccess1">Quiz name</label>
                    <div class="input-group">
                      <span class="input-group-addon"><i class="glyphicon glyphicon-question-sign"></i></span>
                      <input ng-model="questionnairesData.questionnaire_name" type="text" class="form-control" aria-describedby="inputGroupSuccess1Status" placeholder="Enter quiz name">
                    </div>
                  </div>

                  <!-- Question description -->
                  <div class="form-group">
                    <label class="control-label" for="inputGroupSuccess1">Add description</label>
                    <div class="input-group">
                      <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
                      <textarea ng-model="questionnairesData.questionnaire_desc" type="text" rows="5" class="form-control" aria-describedby="inputGroupSuccess1Status" placeholder="Add description here"></textarea>
                    </div>
                  </div>

                  <!-- Items -->
                  <div class="form-group">
                    <label class="control-label" for="inputGroupSuccess1">Items</label>
                    <div class="input-group">
                      <span class="input-group-addon"><i class="glyphicon glyphicon-question-sign"></i></span>
                      <input ng-model="questionnairesData.items" type="number" min="1" class="form-control" aria-describedby="inputGroupSuccess1Status">
                    </div>
                  </div>
                  
                  <!-- Start time -->
                  <div class="form-group">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="control-label" for="inputGroupSuccess1">Start datetime</label>
                        <div class="input-group date" id="datetimepicker6">
                          <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                          <input id="datetime_start" type="text" class="form-control" aria-describedby="inputGroupSuccess1Status" />
                        </div>
                      </div>
                    </div>


                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="control-label" for="inputGroupSuccess1">End datetime</label>
                        <div class="input-group date" id="datetimepicker7">
                          <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                          <input id="datetime_end" type="text" class="form-control" aria-describedby="inputGroupSuccess1Status" />
                        </div>
                      </div>
                    </div>
                  </div>

                  <button ng-click="questionnaires_add(session)" type="submit" class="btn btn-primary">Submit</button>
                  <button class="btn cancel" data-dismiss="modal" aria-label="Close">Cancel</button>
                </form>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>

    <!-- Edit Modal -->
    <div ng-controller="course-controller" class="modal fade bd-example-modal-lgs-2" id="editModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <span ng-model="questionnairesInfo.questionnaire_id" id="edit_quest_id"></span>
            <h4 class="modal-title">Questionnaire</h4>
          </div>
          <div class="modal-body">
            <form>
              <!-- Question name -->
              <div class="form-group">
                <label class="control-label" for="inputGroupSuccess1">Questionnaire name</label>
                <div class="input-group">
                  <span class="input-group-addon"><i class="glyphicon glyphicon-question-sign"></i></span>
                  <input type="text" ng-model="questionnairesInfo.questionnaire_name" class="form-control" id="edit_quest_name" placeholder="Enter name" />
                </div>
              </div>

              <!-- Question description -->
              <div class="form-group">
                <label class="control-label" for="inputGroupSuccess1">Add description</label>
                <div class="input-group">
                  <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
                  <textarea ng-model="questionnairesInfo.questionnaire_desc" type="text" rows="5" class="form-control" id="edit_quest_desc" placeholder="Add description here"></textarea>
                </div>
              </div>

              <!-- Items -->
              <div class="form-group">
                <label class="control-label" for="inputGroupSuccess1">Items</label>
                <div class="input-group">
                  <span class="input-group-addon"><i class="glyphicon glyphicon-question-sign"></i></span>
                  <input ng-model="questionnairesData.items" id="edit_quest_item" type="number" min="1" class="form-control" aria-describedby="inputGroupSuccess1Status">
                </div>
              </div>

              <button ng-click="questionnaires_edit()" type="submit" class="btn btn-primary">Save Changes</button>
              <button class="btn cancel" data-dismiss="modal" aria-label="Close">Cancel</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</span>

<script type="application/javascript">
  $('.carousel').carousel({
    interval: false
  })
</script>
<script type="text/javascript">
  $(function () {
    $('#datetimepicker6').datetimepicker({format: 'YYYY-MM-DD HH:mm:ss'});
    $('#datetimepicker7').datetimepicker({
      format: 'YYYY-MM-DD HH:mm:ss',
      useCurrent: false
    });

    $('#datetimepicker6').on('dp.change', function (e) {
      $('#datetimepicker7').data("DateTimePicker").minDate(e.date);
    })

    $('#datetimepicker7').on('dp.change', function (e) {
      $('#datetimepicker6').data("DateTimePicker").maxDate(e.date);
    })
  })
</script>